/*
  These C codes generated by Cpi version 2.0
  Copyright (C) 2019-2020 Alireza Rashti.
*/


#include "core_lib.h"
#include "manifold_lib.h"
#include "utilities_lib.h"
#include "fields_lib.h"



#define add_field_with_stemU(xNAME,stem)\
 if (IsUp)\
 {\
 char field__name__##xNAME[999] = {'\0'};\
 const char *const field__index__##xNAME  = strrchr(#xNAME,'_');\
 assert(field__index__##xNAME);\
 sprintf(field__name__##xNAME,"%s%s",stem,field__index__##xNAME);\
 add_field(field__name__##xNAME,0,patch,NO);\
 }

#define add_field_with_stemD(xNAME,stem)\
 if (IsDown)\
 {\
 char field__name__##xNAME[999] = {'\0'};\
 const char *const field__index__##xNAME  = strrchr(#xNAME,'_');\
 assert(field__index__##xNAME);\
 sprintf(field__name__##xNAME,"%s%s",stem,field__index__##xNAME);\
 add_field(field__name__##xNAME,0,patch,NO);\
 }


void add_3x3_symmetric_field(Grid_T *const grid,const char *const stem,const char *rank);


void add_3x3_symmetric_field(Grid_T *const grid,const char *const stem,const char *rank)
{
  const int IsUp   = strcmp_i(rank,"up");
  const int IsDown = strcmp_i(rank,"down");
  Uint p;

  if (!IsUp && !IsDown)
    Errors("No such rank '%s' is defined.",rank);


  FOR_ALL_PATCHES(p,grid)
  {
  Patch_T *patch = grid->patch[p];

  /* declaring: */
  add_field_with_stemU(symfU_U2U2,stem)
  add_field_with_stemU(symfU_U1U2,stem)
  add_field_with_stemU(symfU_U1U1,stem)
  add_field_with_stemU(symfU_U0U2,stem)
  add_field_with_stemU(symfU_U0U1,stem)
  add_field_with_stemU(symfU_U0U0,stem)
  add_field_with_stemD(symfD_D0D0,stem)
  add_field_with_stemD(symfD_D0D1,stem)
  add_field_with_stemD(symfD_D0D2,stem)
  add_field_with_stemD(symfD_D2D2,stem)
  add_field_with_stemD(symfD_D1D1,stem)
  add_field_with_stemD(symfD_D1D2,stem)


  }

}
